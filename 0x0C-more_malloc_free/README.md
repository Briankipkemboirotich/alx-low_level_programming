School project involving more malloc, free in C